# Проектна задача по предметот Визуелно програмирање
##1.Опис на апликацијата
Темата на оваа проектна задача е имплементација на познатата игра тетрис. Тетрис е логичка игра каде целта е да се чистат линии со манипулирање на форми со цел да се освојат што повеќе поени.
###1.1 Начин на игра
Тетрис се игра на 10x20 матрица каде форми наречени Tetriminos паѓаат од врвот на матрицата и доаѓаат до дното. Tetriminos паѓаат еден по еден, на почетокот доста споро но како што напредува играта брзината се зголемува. Постојат 7 типови на Tetriminos, секој составен од 4 мали коцки наречени Minos.
![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/typesoftminos.png "Types of Tetriminos")

Со користење на стрелките може да се прилагоди каде и како паѓаат овие фигури. Со притиснување на левата или десната стрелка се приспособува позицијата, а со притиснување на горната стрелка се ротира за 90 степени во насока на часовникот. Tetriminos можат да се движат сè додека не стигнат на крајот на матрицата. Потоа, наредниот Tetrimino почнува да паѓа. Со притиснување на долната стрелка паѓањето на фигурите е забрзано.

![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/arrows.png "Buttons")

Примарниот начин да се освојат поени е со чистење на линии преку пополнување на хоризонтален ред од матрицата. За да се исчисти линија, секој квадрат мора да биде пополнет. За да се постигне ова треба да се движат и ротираат Tetriminos така што ќе бидат рамномерно распоредени на дното на матрицата.
###1.2 Изглед на играта 
Почетниот прозорец има три копчиња. New game, High scores, Need help? - објаснети во точка 1.3, 1.5 и 1.6. 
![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/intf.png)
###1.3 Нова игра
За да се започне нова игра треба да се притисне на копчето New game. Се појавува нов прозорец каде што треба да се внесе име и да се притисне на копчето Start. Внесувањето на име е задолжително. Со тоа, веднаш започнува нова игра со празна матрица.

Прозорец за нова игра:

![Прозорец за нова игра](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/newgame.png)

Почеток на играта:

![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/start.png)
![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/play.png)

Во текот на играта може да се види колку поени се освоени и колку линии се исчистени. Исто така може да се види и името на играчот и кое ниво е тој.  
###1.4 Крај на играта
Играта завршува кога Tetrimino ќе дојде до горниот дел на матрицата. Се појавува прозорец кој известува колку поени освоил играчот.

![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/end.png)
###1.5 High scores
Со притиснување на копчето High scores се појавува прозорец со преглед на најдобрите постигнати резултати. 
![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/highscore.png)

###1.6 Need help?
Со притиснување на копчето Need help? се покажува прозорец со кратко упатство за начинот на игра. 

![](https://github.com/DinaGitova/tetris-game/blob/master/screenshots/needhelp.png)

##2.Начин на имплементација
Главните податоци за играта се содржат во класата Grid, во која се содржи една фигура (референца од класата Figure, апстрактна класа од која наследуваат 7 класи, за секоја од фигурите во Тетрис посебно). 

Со притиснување на копчето New Game, внесување на задоволително име(tbName, подложено е на валидација) во новата форма која се отвара и притиснување на копчето Start, започнува да паѓа првата фигура. Потоа, на точно определен интервал започнува да паѓа нова фигура (со помош на објект од класата Random се избира каква од 7те можни ќе биде и која ќе и биде неговата X координата) додека фигурата која веќе паднала се става во листа од правоаголници. 

Секоја од фигурите содржи list<Rectangle> rectangle, листа од 4 објекти од класата Rectangle, вградена во c#, Point location, објект од Point, исто од вградена класа, и bool променлива, или низа од нив, во зависност од тоа колку пати е можно да се заротира објектот;

##3.Опис на една функција или класа
```
public int RemoveFilledLines()
        {
            int q = 0;

            for(int k = 375; k >= 0; )
            {
                int c = 0;

                foreach (Rectangle rect in list)
                {
                    if (rect.Y == k)
                    {
                        c++;
                    }
                }

                if (c == 10)
                {
                    q++;

                    for (int i = 0; i < list.Count;)
                    {
                        if (list[i].Y == k)
                        {
                            list.Remove(list[i]);
                        }

                        else
                        {
                            ++i;
                        }
                    }

                    for (int i = 0; i < list.Count; ++i)
                    {
                        if (list[i].Y < k)
                        {
                            list[i] = new Rectangle(list[i].X, list[i].Y + 21, 21, 21);
                        }
                    }
                }

                else
                {
                    k -= 21;
                }
            }

            return q;
        }
```
Оваа функција проверува дали линиите се пополнети и доколку се ги отстранува. Фор циклусот поминува низ сите линии и за секоја пресметува колку коцкички има во листата со спуштени (неактивни) коцкички со неговите координати. 

Со помош на counter се брои колку коцкички има (вкупно во линија може да има максимум 10 коцкички) ако има 10, ги бара во листата со коцкички тие 10 и ги брише.
Сите други коцкички кои имаат координати погоре од избришаната линија се симнуваат надолу.

На крај враќа колку реда биле избришани со повикувањето на функцијата за да се ажурира тоа под делот lines во текот на играта.

Изработено од: Костов Роберто 141129, Гитова Дина 141537, Топалзолева Емилија 131008, Трипуновска Тина 132006

